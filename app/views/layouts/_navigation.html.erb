<%= link_to 'ACM Ladder', root_path, :class => 'brand' %>
<ul class="nav">
  <li class="<%= 'active' if params[:controller] == 'problems' %>">
  <%= link_to 'Problem', problems_path %>
  </li>
  <li class="<%= 'active' if params[:controller] == 'submissions' && params[:user_id].blank? %>">
  <%= link_to 'Status', submissions_path %>
  </li>
  <% if user_signed_in? %>
  <li class="<%= 'active' if params[:controller] == 'submissions' && !params[:user_id].blank? %>">
    <%= link_to "My Submissions", user_submissions_path(current_user) %>
  </li>
  <% end %>
  <% if can? :manage, :all %>
    <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
      Manage
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li class="nav-header">
      Problem Admin
      </li>
      <li>
      <%= link_to "New Problem", new_problem_path %>
      </li>
      <% if params[:controller] == 'problems' && params[:action] == 'show' %>
        <li>
        <%= link_to "Edit Problem", edit_problem_path %>
        </li>
      <% end %>
    </ul>
    </li>
  <% end %>
  <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
    Account
    <b class="caret"></b>
  </a>
  <ul class="dropdown-menu">
    <% if user_signed_in? %>
      <li>
      <%= link_to current_user.handle, user_path(current_user) %>
      </li>
      <li class="divider"></li>
      <li>
      <%= link_to 'Edit account', edit_user_registration_path %>
      </li>
      <li>
      <%= link_to 'Logout', destroy_user_session_path, :method=>'delete' %>
      </li>
    <% else %>
      <li>
      <%= link_to 'Login', new_user_session_path %>
      </li>
      <li>
      <%= link_to 'Sign up', new_user_registration_path %>
      </li>
    <% end %>
  </ul>
  </li>
</ul>
<%= link_to image_tag('forkme_right_red_aa0000.png', :id => "github-ribbon", :alt => "Fork me on GitHub"), ENV['GITHUB_LINK'] %>
